<% index_page_title = locale_page(page: 'index', locale_obj: locale_obj)[:page_title] %>

<%# if hide_global_footer_cta is set to true (typically from a layout file), we don't show the notice %>
<% hide_global_footer_cta = locals[:hide_global_footer_cta] || current_page.data.hide_global_footer_cta %>

<% if !hide_global_footer_cta %>
  <div class="section notice">
    <span class="notice__description">
      <h5 class="notice__title">Try Sharesight today</h5>
      Track <strong>10 holdings</strong> for free.
    </span>

    <a href="<%= config[:signup_url] %>" title="Sign up for Sharesight" class="notice__button">
      Sign up for Free
    </a>
  </div>
<% end %>

<footer class="section footer" id="footer">
  <div class="footer__container">
    <div class="footer__head">
      <img src="<%= image_path('logos/logo-neg.svg') %>" class="footer__logo" alt="<%= index_page_title %>" id="footer_site_logo">
      <p class="footer__intro" role="contentinfo" id="footer_intro">Simply the best portfolio management tool for DIY investors.</p>
    </div>

    <div class="footer__actions">
      <label for="region_selector" class="footer__locale">
        <select id="region_selector">
          <% data.locales.select{ |locale| locale.id != default_locale_id }.each do |locale| %>
            <option label="Region: <%= locale.name.upcase %>" value="<%= locale.id %>" <% if locale_obj[:id] == locale.id %>selected<% end %>>
              Region: <%=locale.name.upcase%>
            </option>
          <%end%>
          <option value='-' disabled>――――</option>
          <option label="Region: <%= default_locale_obj.name.upcase %>" value="<%= default_locale_obj.id %>" <% if locale_obj[:id] == default_locale_obj.id %>selected<% end %>>
            Region: <%= default_locale_obj.name.upcase %>
          </option>
        </select>
      </label>

      <div class="footer__buttons">
        <a href="<%= config[:login_url] %>" class="footer__login" title="Login to Sharesight">LOGIN</a>
        <a href="<%= config[:signup_url] %>" class="footer__sign-up" title="Sign up for Sharesight">SIGN UP</a>
      </div>

      <div class="footer__apps">
        <a href="<%= config[:google_store_url] %>" class="footer__app" title="<%= locale_obj[:footer_android_alt] %>"><img src="<%= image_path('icons/google-play-badge.svg')%>" alt="<%= locale_obj[:footer_android_alt] %>"></a>
        <a href="<%= config[:ios_store_url] %>" class="footer__app" title="<%= locale_obj[:footer_ios_alt] %>"><img src="<%= image_path('icons/download-on-the-app-store-apple.svg')%>" alt="<%= locale_obj[:footer_ios_alt] %>"></a>

        <div class="footer__social">
          <% data.social_media_icons.each do |smi| %>
            <a href="<%= smi.url %>" class="footer__social-link" title="Check us out on <%= smi.name %>">
              <%= image_tag "/img/icons/#{smi.image}", class: "footer__social-icon" %>
            </a>
          <% end %>
        </div>
      </div>
    </div>

    <div class="footer__links_container">
      <ul class="footer__links footer__links--double-width" id="main-menu" role="menubar" aria-label="Company Links">
        <li role="none" class="footer__link-header">Company</li>
        <li role="menuitem">
          <a href="<%= localize_url(locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Sharesight">
            www.sharesight.com
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('faq', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Frequently Asked Questions | Sharesight">
            FAQ
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('about-sharesight', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="About Us | Sharesight">
            About Us
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= unlocalized_url('blog', base_url: config[:marketing_url]) %>" class="footer__link" title="Sharesight Blog">
            Blog
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('pricing', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Pricing | Sharesight">
            Pricing
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('partners', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Partners | Sharesight">
            Partners
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('reviews', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Reviews | Sharesight">
            Reviews
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('affiliates', locale_id: locale_obj[:id]) %>" class="footer__link" title="<%= locale_page(page: 'affiliates')[:page_title] %>">
            Affiliates
          </a>
        </li>
      </ul>

      <ul class="footer__links" id="main-menu" role="menubar" aria-label="Resources Links">
        <li role="none" class="footer__link-header">Resources</li>
        <li role="menuitem">
          <a href="<%= config[:api_url] %>" class="footer__link" title="Sharesight Developer API">
            Developer API
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('privacy-policy', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Privacy Policy | Sharesight">
            Privacy Policy
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('sharesight-terms-of-use', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Terms of Service | Sharesight">
            Terms of Use
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= localize_url('sharesight-professional-terms-of-use', locale_id: locale_obj[:id], base_url: config[:marketing_url]) %>" class="footer__link" title="Terms of Service | Sharesight Pro">
            Pro Terms of Use
          </a>
        </li>
      </ul>

      <ul class="footer__links" id="main-menu" role="menubar" aria-label="Support Links">
        <li role="none" class="footer__link-header">Support</li>
        <li role="menuitem">
          <a href="<%= localize_url(locale_id: locale_obj[:id]) %>" class="footer__link" title="<%= locale_obj[:default_title] %>">
            Help Centre
          </a>
        </li>

        <li role="menuitem">
          <a href="<%= config[:community_url] %>" class="footer__link" title="Sharesight Community Forum">
            Community Forum
          </a>
        </li>
      </ul>
    </div>

    <ul class="footer__regional-links" role="menubar" aria-label="Regional Website Links">
      <li role="none" class="footer__link-header">Region</li>

      <%#
        These regional links are a test to see if these links will improve our index rate of non-global pages.
        We only grab the first 5 because we may eventually add 20+ and this would be ugly.
      %>
      <% data.locales.first(5).each do |locale| %>
        <li role="menuitem">
          <a href="<%= localize_url(locale_id: locale[:id]) %>" class="footer__link" title="Sharesight <%= locale[:name] %> Help" data-no-localize>
            <%= locale[:name] %>
          </a>
        </li>
      <% end %>
    </ul>
  </div>
</footer>

<footer class="footer__copyright">
  © <%= Date.today.year %> Sharesight
  <br />All rights reserved.
</footer>
